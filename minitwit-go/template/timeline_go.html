{% extends "template/layout.html" %}
{% block title %}
{% if request.Endpoint == '/public' %}
Public Timeline
{% elif request.Endpoint == 'user_timeline' %}
{{ profile_user.Username }}'s Timeline
{% else %}
My Timeline
{% endif %}
{% endblock %}
{% block body %}
<h2>
  {% if request.Endpoint == '/public' %}
  Public Timeline
  {% elif request.Endpoint == 'user_timeline' %}
  {{ profile_user.Username }}'s Timeline
  {% else %}
  My Timeline
  {% endif %}
</h2>


{% if g.UserID %}
{% if request.Endpoint == 'user_timeline' %}
<div class=followstatus>
  {% if g.UserID == profile_user.User_id %}
  This is you!
  {% elif followed.Followed %}
  You are currently following this user.
  <a class=unfollow href="{{unfollow_url}}">Unfollow user</a>.
  {% else %}
  You are not yet following this user.
  <a class=follow href="{{follow_url}}">Follow user</a>.
  {% endif %}
</div>

{% elif request.Endpoint == '/' %}
<div class=twitbox>
  <h3>What's on your mind {{ g.Username }}?</h3>
  <form action="/add_message" method=post>
    <p><input type=text name=text size=60>
      <input type=submit value="Share">
  </form>
</div>
{% endif %}
{% endif %}

<ul class=messages>
  {% for message in messages %}
  <li><img src="{{message.Gravatar}}">
    <p>
      <strong><a>{{ message.Username }}</a></strong>
      {{ message.Text }}
      <small>&mdash; {{ message.Formatted_date }}</small>
      {% endfor %}
</ul>
{% endblock %}